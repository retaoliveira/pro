<!DOCTYPE html>
<html>
  <head>
    <title>Documentos parametrizados</title>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />


<link rel="stylesheet" href="/css/bootstrap.min.css"/>
<link rel="stylesheet" href="/css/layouts/main.css"/>
<link rel="stylesheet" href="/css/navigators/navbar.css"/>
<link rel="stylesheet" href="/css/plyr.css"/>
<link rel="stylesheet" href="/css/flag-icon.min.css"/>


<link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" />




  

  
  
  
    
  
  

  <link rel="icon" type="image/png" href="/images/favicon_hu8376fd15465fef26ffe66b6bcf0ca686_13669_42x0_resize_box_3.png" />

<meta property="og:title" content="Documentos parametrizados" />
<meta property="og:description" content="Um dos muitos benefícios de trabalhar com R Markdown é que você pode reproduzir análises com o clique de um botão. Isto torna muito fácil atualizar qualquer trabalho e alterar qualquer parâmetro de entrada dentro do relatório. Relatórios parametrizados estendem esse benefício e permitem aos usuários especificar um ou mais parâmetros para personalizar a análise. Isto é útil se você quiser criar um modelo de relatório que possa ser reutilizado em vários cenários similares." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://determined-poitras-d3dc0d.netlify.app/cursos/intro_r/reprodutibility/" /><meta property="article:section" content="cursos" />
<meta property="article:published_time" content="2021-10-15T00:00:00+01:00" />
<meta property="article:modified_time" content="2021-10-15T00:00:00+01:00" />



    
    
<meta name="description" content="Documentos parametrizados" />
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css"
/>
<link rel="stylesheet" href="/css/layouts/single.css"/>
<link rel="stylesheet" href="/css/navigators/sidebar.css">

<link rel="stylesheet" href="/css/style.css"/>



    
    
  </head>

  <body data-spy="scroll" data-target="#TableOfContents" data-offset="80">
    <div class="container-fluid bg-dimmed wrapper">
      
      
    





  


  




  
  
    
  
  



  
  
    
  
  


<nav class="navbar navbar-expand-xl top-navbar final-navbar shadow">
  <div class="container">
      <button class="navbar-toggler navbar-light" id="sidebar-toggler" type="button" onclick="toggleSidebar()">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="/">
      
        <img src="/images/main-logo_hu864bbe108f1be1ae04b57f7f2fd9d631_5637_42x0_resize_box_3.png" alt="Logo">
      Renata Oliveira</a>
    <button class="navbar-toggler navbar-light" id="toc-toggler" type="button" onclick="toggleTOC()">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse lang-selector" id="top-nav-items">
      <ul class="navbar-nav ml-auto">
      
      </ul>
    </div>
  </div>
  
  
    <img src="/images/main-logo_hu864bbe108f1be1ae04b57f7f2fd9d631_5637_42x0_resize_box_3.png" class="d-none" id="main-logo" alt="Logo">
  
  
    <img src="/images/inverted-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_42x0_resize_box_3.png" class="d-none" id="inverted-logo" alt="Inverted Logo">
  
</nav>



      
      
  <section class="sidebar-section" id="sidebar-section">
    <div class="sidebar-holder">
      <div class="sidebar" id="sidebar">
        <form class="mx-auto" method="get" action="/search">
          <input type="text" name="keyword" value="" placeholder="Search" data-search="" id="search-box" />
        </form>
        <div class="sidebar-tree">
          <ul class="tree" id="tree">
            <li id="list-heading"><a href="/posts" data-filter="all">Posts</a></li>
            <div class="subtree">
                
  
  
  
  
  
    
    <li><a class="" href="/courses/sdss/" title="Courses">Courses</a></li>
  

  
  
  
  
  
    
    <li><a class="" href="/posts/introduction/" title="Introduction">Introduction</a></li>
  

  
  
  
  
  
    
    <li>
      <i class="fas fa-plus-circle"></i><a class="" href="/posts/category/">Category</a>
      
      <ul class="">
        
  
  
  
  
  
    
    <li>
      <i class="fas fa-plus-circle"></i><a class="" href="/courses/category/sub-category/">Sub-Category</a>
      
      <ul class="">
        
  
  
  
  
  
    
    <li><a class="" href="/courses/category/sub-category/rich-content/" title="Rich Content">Rich Content</a></li>
  


      </ul>
    </li>
  


      </ul>
    </li>
  

  
  
  
  
  
    
    <li><a class="" href="/posts/shortcodes/" title="Shortcodes Sample">Shortcodes Sample</a></li>
  


            </div>
          </ul>
        </div>
      </div>
    </div>
  </section>


      
      
<section class="content-section" id="content-section">
  <div class="content">
    <div class="container p-0 read-area">
      
      <div class="hero-area col-sm-12" id="hero-area" style='background-image: url(https://determined-poitras-d3dc0d.netlify.app/images/default-hero.jpg);'>
      </div>

      
      <div class="page-content">
        <div class="author-profile ml-auto align-self-lg-center">
          <img class="rounded-circle" src='/images/reta_huaab57059f86c546c583a9e55d0837b53_77497_120x120_fit_q75_box.jpg' alt="Author Image">
          <h5 class="author-name">Renata Oliveira</h5>
          <p>October 15, 2021</p>
        </div>

        <div class="title">
          <h1>Documentos parametrizados</h1>
        </div>
        
        <div class="post-content" id="post-content">
          <p>Um dos muitos benefícios de trabalhar com R Markdown é que você pode reproduzir análises com o clique de um botão. Isto torna muito fácil atualizar qualquer trabalho e alterar qualquer parâmetro de entrada dentro do relatório. Relatórios parametrizados estendem esse benefício e permitem aos usuários especificar um ou mais parâmetros para personalizar a análise. Isto é útil se você quiser criar um modelo de relatório que possa ser reutilizado em vários cenários similares. Como exemplos:</p>
<ul>
<li>
<p>Mostrar resultados para uma localização geográfica específica.</p>
</li>
<li>
<p>Executar um relatório que cubra um período de tempo específico.</p>
</li>
<li>
<p>Executar uma única análise várias vezes para diferentes suposições.</p>
</li>
</ul>
<h1 id="declaração-de-parâmetros">Declaração de parâmetros</h1>
<p>Os parâmetros são especificados usando o campo dos parâmetros dentro da seção <code>YAML</code>. Podemos especificar um ou mais parâmetros com cada item em uma nova linha. A título de exemplo:</p>
<pre tabindex="0"><code class="language-{r}" data-lang="{r}">---
title: My Document
output: html_document
params:
  year: 2018
  region: Europe
  printcode: TRUE
  data: file.csv
---
</code></pre><p>Todos os tipos de dados do <code>R</code> podem ser processados por <code>yaml::yaml.load()</code>, podendo ser incluídos como parâmetros, a saber: <code>character</code>, <code>numeric</code>, <code>integer</code> e <code>logical</code>. Também podemos usar objetos R incluindo <code>!r</code> antes das expressões <code>R</code>. Por exemplo, podemos incluir a data atual com o seguinte código R:</p>
<pre tabindex="0"><code class="language-{r}" data-lang="{r}">---
title: My Document
output: html_document
params:
  date: !r Sys.Date()
---
</code></pre><p>Qualquer expressão no <code>R</code> incluída dentro dos parâmetros no <code>yaml</code> é executada antes de qualquer código no documento, portanto qualquer dependência de pacote deve ser explicitamente declarada usando o <code>pacote::função</code> notação (por exemplo, <code>!r lubridate::today()</code>), mesmo que o pacote seja carregado mais tarde no documento <code>Rmd</code>.</p>
<h2 id="knitting-com-parâmetros"><code>Knitting</code> com parâmetros</h2>
<p>Há três maneiras de se fazer um relatório parametrizado:</p>
<ul>
<li>
<p>Usando o botão <code>Knit</code> dentro do RStudio.</p>
</li>
<li>
<p><code>rmarkdown::render()</code> com o argumento dos <code>params</code>.</p>
</li>
<li>
<p>Usando uma interface de usuário interativa para inserir valores de parâmetros.</p>
</li>
</ul>
<h3 id="o-botão-knit">O botão <code>Knit</code></h3>
<p>Usando o botão <code>Knit</code> no RStudio ou a função <code>rmarkdown::render()</code>, os valores-padrão listados nos metadados do <code>YAML</code> (quando especificados) serão utilizados.</p>
<h3 id="knitting-com-parâmetros-personalizados"><code>Knitting</code> com parâmetros personalizados</h3>
<p>Mesmo que seu documento tenha o campo de parâmetros nos metadados do <code>YAML</code>, você pode realmente substituí-lo fornecendo uma lista personalizada de valores de parâmetros para a função <code>rmarkdown::render()</code>. Por exemplo:</p>
<pre tabindex="0"><code class="language-{r" data-lang="{r">rmarkdown::render(&quot;MyDocument.Rmd&quot;, params = list(
  year = 2017,
  region = &quot;Asia&quot;,
  printcode = FALSE,
  file = &quot;file2.csv&quot;
))
</code></pre><p>Não temos que declarar explicitamente todos os parâmetros no argumento dos <code>params</code>. Qualquer parâmetro não especificado terá como padrão os valores especificados nos metadados do <code>YAML</code>. Por exemplo, a função a seguir somente anulará o parâmetro da região:</p>
<pre tabindex="0"><code class="language-{r" data-lang="{r">rmarkdown::render(&quot;MyDocument.Rmd&quot;, params = list(
  region = &quot;Asia&quot;
))
</code></pre><p>Você pode querer integrar estas mudanças em uma função. Tal função também poderia ser usada para criar um arquivo de saída com um nome de arquivo diferente para cada uma das diferentes combinações de parâmetros. No exemplo a seguir, um novo arquivo Report-region year.pdf é criado para cada conjunto de parâmetros:</p>
<pre tabindex="0"><code class="language-{r" data-lang="{r">render_report = function(region, year) {
  rmarkdown::render(
    &quot;MyDocument.Rmd&quot;, params = list(
      region = region,
      year = year
    ),
    output_file = paste0(&quot;Report-&quot;, region, &quot;-&quot;, year, &quot;.pdf&quot;)
  )
}
</code></pre><h3 id="a-interface-interativa-ao-usuário">A interface interativa ao usuário</h3>
<p>Podemos usar uma interface gráfica de usuário (<code>GUI</code>) baseada no <code>Shiny</code> para inserir interativamente os parâmetros de um relatório. A interface de usuário pode ser chamada por <code>rmarkdown::render(&quot;MyDocument.Rmd&quot;, params = &quot;ask&quot;)</code> ou clicando no menu suspenso atrás do botão <code>Knit</code> e escolhendo <code>Knit with Parameters</code> no RStudio. A Figura a seguir apresenta a <code>GUI</code> do <code>rmarkdown</code> solicitando parâmetros de entrada.</p>
<p>Valores dos parâmetros de entrada interativamente para relatórios parametrizados.</p>
<p><img src="https://retaoliveira.github.io/relements/figures/params-input.png" alt="Valores dos parâmetros de entrada interativamente para relatórios parametrizados."></p>
<p>Os controles de entrada para diferentes tipos de parâmetros podem ser personalizados, especificando subitens adicionais dentro da especificação do parâmetro em <code>YAML</code>. Por exemplo, controles deslizantes, caixas de seleção e caixas de entrada de texto podem ser todos usados para controles de entrada.</p>
<p>Além disso, também podemos especificar as restrições dos valores permitidos em cada parâmetro. Por exemplo, podemos querer que nosso modelo só seja executado durante anos entre 2010 e 2018. Isto é particularmente benéfico se você gostaria que outros usuários interagissem com o relatório, pois impede que os usuários tentem executar relatórios fora dos limites projetados.</p>
<p>Adaptando nosso exemplo acima para incluir algumas configurações:</p>
<pre tabindex="0"><code class="language-{r" data-lang="{r">---
title: My Document
output: html_document
params:
  year:
    label: &quot;Year&quot;
    value: 2017
    input: slider
    min: 2010
    max: 2018
    step: 1
    sep: &quot;&quot;
  region:
    label: &quot;Region:&quot;
    value: Europe
    input: select
    choices: [North America, Europe, Asia, Africa]
  printcode:
    label: &quot;Display Code:&quot;
    value: TRUE
  data:
    label: &quot;Input dataset:&quot;
    value: results.csv
    input: file
---
</code></pre><p>Isto resulta na interface do usuário para os parâmetros.</p>
<p><img src="https://retaoliveira.github.io/relements/figures/params-controls.png" alt="Valores dos parâmetros de entrada interativamente para relatórios parametrizados."></p>
<p>Controles personalizados para os parâmetros.
FIGURA 15.2: Controles personalizados para os parâmetros.</p>
<p>O tipo de controle Brilhante utilizado é controlado pelo campo de entrada. A Tabela 15.1 mostra os tipos de entrada atualmente suportados (veja a página de ajuda da função Shiny associada para atributos adicionais que podem ser especificados para personalizar a entrada, por exemplo, ?shiny::checkboxInput).</p>
<p>TABELA 15.1: Possíveis tipos de entrada e as funções Brilhantes associadas para relatórios parametrizados.
Input Type	Shiny Function
checkbox	checkboxInput
numeric	numericInput
slider	sliderInput
date	dateInput
text	textInput
file	fileInput
radio	radioButtons
select	selectInput
password	passwordInput</p>

        </div>

        
        
          <div class="btn-improve-page">
              <a href="https://github.com/retaoliveira/places.git/edit/main/content/cursos%5cintro_r%5creprodutibility.md" title="Improve this page" target="_blank" rel="noopener">
                <i class="fas fa-code-branch"></i>
                Improve this page
              </a>
          </div>
        

        
      <hr />
        







  





  
  

  
  

  
  

  
  


<div class="row next-prev-navigator">
  
  
</div>

      <hr />
      
      
      </div>
    </div>
  </div>
  
  <a id="scroll-to-top" class="btn"><i class="fas fa-chevron-circle-up"></i></a>
  
</section>


      
      
  <section class="toc-section" id="toc-section">
    
    <div class="toc-holder">
      <h5 class="text-center pl-3">Table of Contents</h5>
      <hr>
      <div class="toc">
        <nav id="TableOfContents">
  <ol>
    <li><a href="#knitting-com-parâmetros"><code>Knitting</code> com parâmetros</a>
      <ol>
        <li><a href="#o-botão-knit">O botão <code>Knit</code></a></li>
        <li><a href="#knitting-com-parâmetros-personalizados"><code>Knitting</code> com parâmetros personalizados</a></li>
        <li><a href="#a-interface-interativa-ao-usuário">A interface interativa ao usuário</a></li>
      </ol>
    </li>
  </ol>
</nav>
      </div>
    </div>
    
  </section>

    </div>

    
    









  
    
  



  
  
    
  

  
  
    
  

  
  
    
    
  


  
  
  

  
  
  

  
  
  
    
  
  

  
  
  

  <footer class="container-fluid text-center align-content-center footer pb-2">
    <div class="container pt-5">
      <div class="row text-left">
        
        <div class="col-md-4 col-sm-12">
          <h5>Navigation</h5>
          
          <ul>
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="/#about">About</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="/#experiences">Experiences</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="/#education">Education</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="/#projects">Projects</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="/#recent-posts">Recent Posts</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="/#skills">Skills</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="/#achievements">Achievements</a>
                </li>
              
          </ul>
          
        </div>
        
        
        <div class="col-md-4 col-sm-12">
          <h5>Contact me:</h5>
          <ul>
            
            <li><span>Email: </span> <span>renataoliveira@gmail.com</span></li>
            
            <li><span>Phone: </span> <span>&#43;5531988662226</span></li>
            
          </ul>
        </div>
        
        
        
          
          <div class="col-md-4 col-sm-12">
            <p>Stay up to date with email notification</p>
            
              <form method='post' action='https://blogtrottr.com'>
              <div class="form-group">
              <input type='email' class="form-control" name='btr_email' placeholder="Enter email"/><br />
              <input type='hidden' name='btr_url' value='https://determined-poitras-d3dc0d.netlify.app/index.xml' />
              <input type='hidden' name='schedule_type' value='1' />
              <small id="emailHelp" class="form-text text-muted">By entering your email address, you agree to receive the newsletter of this website.</small>
              <button type="submit" class="btn btn-info"> Submit </button>
              </form>
            
          </div>
        
      </div>
    </div>
    
    
    <hr />
    <div class="container">
      <div class="row text-left">

<script src="https://unpkg.com/ionicons@5.0.0/dist/ionicons.js"></script>


This document was built with the&nbsp
&nbsp<a href="https://retaoliveira.github.io/blog" target="_blank" rel="noopener" style="color:#447178"><ion-icon name="heart-outline"></ion-icon></a>,&nbsp
<a href="https://github.com/retaoliveira" target="_blank" rel="noopener" style="color:#447178"><ion-icon name="logo-github"></ion-icon></a>, &nbsp<a href="https://cran.r-project.org" target="_blank" rel="noopener" style="color:#447178"><i class="fab fa-r-project "></i></a> &nbspand
&nbsp<a href="https://bookdown.org/yihui/blogdown/" target="_blank" rel="noopener" style="color:#447178"> blogdown</a>.
</p>
          </a>
        </div>
      </div>
    </div>
    
  </footer>


    <script type="text/javascript" src="/js/jquery-3.4.1.min.js"></script>
<script type="text/javascript" src="/js/popper.min.js"></script>
<script type="text/javascript" src="/js/bootstrap.min.js"></script>

<script type="text/javascript" src="/js/navbar.js"></script>
<script type="text/javascript" src="/js/plyr.js"></script>
<script type="text/javascript" src="/js/main.js"></script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js"></script>
<script src="/js/single.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>


  </body>
</html>
